{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap b6f973274c414481a8d9","webpack:///./src/util.js","webpack:///./src/parseProtoBuf.js","webpack:///./src/parseJSON.js","webpack:///./src/snappyjs-uncompress.js","webpack:///./src/DzhyunDataParser.js","webpack:///./~/snappyjs/snappy_decompressor.js"],"names":["stringToArrayBuffer","arrayBufferToString","str","strLen","length","buf","ArrayBuffer","bufView","Uint8Array","i","charCodeAt","arrayBuffer","uint8Array","results","start","subArray","subarray","push","String","fromCharCode","apply","decodeURIComponent","escape","join","parseJSON","convertToJsonArray","input","head","data","map","row","rowObject","forEach","cell","columnIndex","Promise","resolve","then","json","response","JSON","parse","Err","Data","JsonTbl","tbl","key","Object","keys","value","Id","Qid","Counter","uncompress","compressed","TypeError","decompressor","SnappyDecompressor","readUncompressedLength","Error","uncompressed","uncompressedView","uncompressToBuffer","DzhyunDataParser","options","compresser","isJSON","undefined","parseProtoBuf","yfloat","catch","e","bind","parseYfloat","reject","first","result","module","exports"],"mappings":"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;;;;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,aAAa,YAAY;AACzB;AACA;AACA;;AAEA;AACA;AACA,aAAa,YAAY;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"dzhyun-dataparser-json.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"DzhyunDataParser\"] = factory();\n\telse\n\t\troot[\"DzhyunDataParser\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b6f973274c414481a8d9","export function stringToArrayBuffer(str) {\r\n  const strLen = str.length;\r\n  const buf = new ArrayBuffer(strLen * 2); // 2 bytes for each char\r\n  const bufView = new Uint8Array(buf);\r\n  for (let i = 0; i < strLen; i += 1) {\r\n    bufView[i] = str.charCodeAt(i);\r\n  }\r\n  return buf;\r\n}\r\n\r\nexport function arrayBufferToString(arrayBuffer) {\r\n  const uint8Array = new Uint8Array(arrayBuffer);\r\n  const length = uint8Array.length;\r\n  if (length > 65535) {\r\n    const results = [];\r\n    let start = 0;\r\n    do {\r\n      const subArray = uint8Array.subarray(start, start += 65535);\r\n      results.push(String.fromCharCode.apply(String, subArray));\r\n    } while (start < length);\r\n\r\n    return decodeURIComponent(escape(results.join('')));\r\n  }\r\n  return decodeURIComponent(escape(String.fromCharCode.apply(String, uint8Array)));\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","// empty (null-loader)\n\n\n// WEBPACK FOOTER //\n// ./src/parseProtoBuf.js","import { arrayBufferToString } from './util';\n\nfunction convertToJsonArray(input) {\n  if (!input || !input.head) return input;\n\n  const head = input.head;\n  const data = input.data;\n\n  return data.map((row) => {\n    const rowObject = {};\n    row.forEach((cell, columnIndex) => {\n      rowObject[head[columnIndex]] = convertToJsonArray(cell);\n    });\n    return rowObject;\n  });\n}\n\nexport default function parseJSON(input) {\n  return Promise.resolve().then(() => {\n    const json = (typeof ArrayBuffer !== 'undefined' && input instanceof ArrayBuffer) ? arrayBufferToString(input) : input;\n    const response = JSON.parse(json);\n    if (response.Err !== 0) {\n      return response;\n    }\n\n    let data = response.Data;\n    if (data.JsonTbl) {\n      const tbl = convertToJsonArray(data.JsonTbl);\n      const key = Object.keys(tbl[0])[0];\n      const value = tbl[0][key];\n      data = {\n        Id: data.Id,\n        [key]: value,\n      };\n    }\n\n    return {\n      Qid: response.Qid,\n      Err: response.Err,\n      Counter: response.Counter,\n      Data: data,\n    };\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/parseJSON.js","import { SnappyDecompressor } from 'snappyjs/snappy_decompressor';\r\n\r\nexport default function uncompress(compressed) {\r\n  if (!(compressed instanceof ArrayBuffer)) {\r\n    throw new TypeError('Argument compressed must be type of ArrayBuffer');\r\n  }\r\n\r\n  const decompressor = new SnappyDecompressor(new Uint8Array(compressed));\r\n  const length = decompressor.readUncompressedLength();\r\n  if (length === -1) {\r\n    throw new Error('Invalid Snappy bitstream');\r\n  }\r\n  const uncompressed = new ArrayBuffer(length);\r\n  const uncompressedView = new Uint8Array(uncompressed);\r\n  if (!decompressor.uncompressToBuffer(uncompressedView)) {\r\n    throw new Error('Invalid Snappy bitstream');\r\n  }\r\n  return uncompressed;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/snappyjs-uncompress.js","import uncompress from './snappyjs-uncompress';\r\nimport parseProtoBuf from './parseProtoBuf';\r\nimport parseJSON from './parseJSON';\r\nimport { stringToArrayBuffer } from './util';\r\n\r\nclass DzhyunDataParser {\r\n\r\n  // options.compresser 压缩格式，默认不设置则根据数据自动判断，先直接解析数据失败了再解压后再次解析，\r\n  // 'snappy'使用snappy压缩，解压时如果失败直接报错，false不使用压缩，直接解析数据失败直接报错\r\n  // options.yfloat {bool} 是否将long类型数据做yfloat解析，默认不设置为true，设置为false则不解析, 不包括pbtable\r\n  constructor(options = {}) {\r\n    this.options = options;\r\n  }\r\n\r\n  parse(input) {\r\n    return Promise.resolve()\r\n      .then(() => (this.options.compresser === 'snappy' ? DzhyunDataParser.uncompress(input) : input))\r\n      .then((data) => {\r\n        if (DzhyunDataParser.isJSON(data)) {\r\n          return DzhyunDataParser.parseJSON(data);\r\n        } else if (this.options.compresser === undefined) {\r\n          // 默认自动判断压缩时，当解析pb失败后再次解压后再尝试解析\r\n          return DzhyunDataParser.parseProtoBuf(data, this.options.yfloat !== false)\r\n            .catch(e => DzhyunDataParser.uncompress(data)\r\n              .catch(() => { throw e; })\r\n              .then(this.parse.bind(this)));\r\n        }\r\n        return DzhyunDataParser.parseProtoBuf(data, this.options.yfloat !== false);\r\n      });\r\n  }\r\n\r\n  static parseProtoBuf(data, parseYfloat) {\r\n    return typeof parseProtoBuf === 'function' ? parseProtoBuf(data, parseYfloat) : Promise.reject(new Error('no support parse protobuf data'));\r\n  }\r\n\r\n  static parseJSON(data) {\r\n    return typeof parseJSON === 'function' ? parseJSON(data) : Promise.reject(new Error('no support parse JSON data'));\r\n  }\r\n\r\n  static isJSON(data) {\r\n    let first;\r\n    if (typeof data === 'string') {\r\n      first = data.charCodeAt(0);\r\n    } else if (data instanceof ArrayBuffer) {\r\n      first = new Uint8Array(data)[0];\r\n    }\r\n    return first === 123;\r\n  }\r\n\r\n  static uncompress(data) {\r\n    return Promise.resolve().then(() => {\r\n      let result = data;\r\n      if (typeof uncompress !== 'function') throw new Error('no support snappy uncompress');\r\n      if (typeof data === 'string') {\r\n        result = stringToArrayBuffer(result);\r\n        result = uncompress(result);\r\n      } else {\r\n        result = uncompress(result);\r\n      }\r\n      return result;\r\n    });\r\n  }\r\n}\r\nmodule.exports = DzhyunDataParser;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/DzhyunDataParser.js","// The MIT License (MIT)\n//\n// Copyright (c) 2016 Zhipeng Jia\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n\n'use strict'\n\nvar WORD_MASK = [0, 0xff, 0xffff, 0xffffff, 0xffffffff]\n\nfunction copyBytes (from_array, from_pos, to_array, to_pos, length) {\n  var i\n  for (i = 0; i < length; i++) {\n    to_array[to_pos + i] = from_array[from_pos + i]\n  }\n}\n\nfunction selfCopyBytes (array, pos, offset, length) {\n  var i\n  for (i = 0; i < length; i++) {\n    array[pos + i] = array[pos - offset + i]\n  }\n}\n\nfunction SnappyDecompressor (compressed) {\n  this.array = compressed\n  this.pos = 0\n}\n\nSnappyDecompressor.prototype.readUncompressedLength = function () {\n  var result = 0\n  var shift = 0\n  var c, val\n  while (shift < 32 && this.pos < this.array.length) {\n    c = this.array[this.pos]\n    this.pos += 1\n    val = c & 0x7f\n    if (((val << shift) >>> shift) !== val) {\n      return -1\n    }\n    result |= val << shift\n    if (c < 128) {\n      return result\n    }\n    shift += 7\n  }\n  return -1\n}\n\nSnappyDecompressor.prototype.uncompressToBuffer = function (out_buffer) {\n  var array = this.array\n  var array_length = array.length\n  var pos = this.pos\n  var out_pos = 0\n\n  var c, len, small_len\n  var offset\n\n  while (pos < array.length) {\n    c = array[pos]\n    pos += 1\n    if ((c & 0x3) === 0) {\n      // Literal\n      len = (c >>> 2) + 1\n      if (len > 60) {\n        if (pos + 3 >= array_length) {\n          return false\n        }\n        small_len = len - 60\n        len = array[pos] + (array[pos + 1] << 8) + (array[pos + 2] << 16) + (array[pos + 3] << 24)\n        len = (len & WORD_MASK[small_len]) + 1\n        pos += small_len\n      }\n      if (pos + len > array_length) {\n        return false\n      }\n      copyBytes(array, pos, out_buffer, out_pos, len)\n      pos += len\n      out_pos += len\n    } else {\n      switch (c & 0x3) {\n        case 1:\n          len = ((c >>> 2) & 0x7) + 4\n          offset = array[pos] + ((c >>> 5) << 8)\n          pos += 1\n          break\n        case 2:\n          if (pos + 1 >= array_length) {\n            return false\n          }\n          len = (c >>> 2) + 1\n          offset = array[pos] + (array[pos + 1] << 8)\n          pos += 2\n          break\n        case 3:\n          if (pos + 3 >= array_length) {\n            return false\n          }\n          len = (c >>> 2) + 1\n          offset = array[pos] + (array[pos + 1] << 8) + (array[pos + 2] << 16) + (array[pos + 3] << 24)\n          pos += 4\n          break\n        default:\n          break\n      }\n      if (offset === 0 || offset > out_pos) {\n        return false\n      }\n      selfCopyBytes(out_buffer, out_pos, offset, len)\n      out_pos += len\n    }\n  }\n  return true\n}\n\nexports.SnappyDecompressor = SnappyDecompressor\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/snappyjs/snappy_decompressor.js\n// module id = 5\n// module chunks = 0 1"],"sourceRoot":""}